Local Food Board — Backend (Node + Express)

Описание:
### Идея приложения: NeighborEats – Локальная доска объявлений для продажи домашней еды

**Описание концепции:** 
Это приложение как простая доска объявлений для соседей и местных производителей еды (фермеры, дачники, бабушки). Пользователи (продавцы) размещают посты типа: "Сегодня испекла пирог за 300 руб., вкус ванильный, бесплатный самовывоз по адресу: ул. Ленина, 5, д.3, кв.7, телефон: +7 (123) 456-78-90". Никакой онлайн-оплаты в app – всё через наличные или переводы напрямую, чтобы избежать мошенничества и юридических проблем с продажей еды (в России многие продают домашнее без лицензии, но для масштаба стоит рекомендовать самозанятых или партнёрства). Объявление автоматически висит ровно 24 часа, затем исчезает (без архива, чтобы не накапливать риски). Добавим фильтры по району/блюду (пироги, джемы, овощи), геолокацию для поиска ближайших постов и базовую верификацию профиля (через email или соцсети, без документов в app). Можно добавить опцию "оповестить соседей" – push-уведомления если кто-то неподалёку разместил что-то свежее.

**Почему это востребовано и востребовано сейчас:** 
- В условиях локдаунов и инфляции люди всё чаще ищут свежую, домашнюю еду от соседей вместо дорогих магазинов (ВЦИОМ, 2023: 25% россиян готовы покупать домашнее локально). Аналоги как Avito или Доски объявлений существуют, но они перегружены вещами и не фокусируются на пище/сезонных товарах; плюс, риск мошенничества высокий, а здесь минимальный (без оплаты в app, только контакты). Это идеально для небольших городов и районов, где "кухни соседей" – реальный тренд (как крафтовые ярмарки, но цифровые и повседневные). Без документов в app – продавцы решают сами (например, проверяют у местных властей), app просто платформа для связи, как доска на подъезде, но цифровая. 
- **Целевая аудитория:** Семьи, дачники, пенсионеры 30–70 лет в России и аналогичных странах (где локальный трейдинг популярен). Потенциал: как у Vkontakte Marketplace, но специализированный – миллионы пользователей за счёт простоты. 
- **Монетизация:** Пока что бесплатное (для минимального риска и быстрого роста), но со временем: премиум для крупных фермеров (расширенные посты с фото/видео за 50–100 руб./мес), партнёрства с локальными сервисами (доставка как Ozon или Яндекс.Доставка – комиссия), или реклама от брендов еды (типа "хаббаренцев" в районных группах).

**Дополнительные фишки для реализации:** 
- **Автоматическое снятие:** Таймер 24 часов – пост удаляется, чтобы избежать просрочки еды. 
- **Безопасность:** Чёрный список для жалоб (если кто-то не отвечает или обманывает), но без модерации, чтобы app оставалось простым. 
- **Расширения:** Связь с мессенджерами (переход в WhatsApp после просмотра поста) для удобства. Если пойдёт хорошо, добавить чат прямо в app, как в OLX. 



1) Установить зависимости:
   npm install
 
2) Запустить сервер:
   npm start



local-food-board-backend/
├── package.json
├── tsconfig.json
├── .env
├── nodemon.json
├── README.md
├── src/
│   ├── config/database.ts
│   ├── index.ts
│   ├── types/models.ts
│   ├── types/express.ts
│   ├── models/
│   │   ├── User.ts
│   │   ├── Post.ts
│   │   └── index.ts
│   ├── controllers/
│   │   ├── usersController.ts
│   │   └── postsController.ts
│   ├── routes/
│   │   ├── users.ts
│   │   └── posts.ts
│   ├── middleware/
│   │   ├── upload.ts
│   │   └── validation.ts
│   ├── utils/
│   │   ├── geo.ts
│   │   └── backgroundTasks.ts
│   └── scripts/
│       └── initDB.ts
└── uploads/  (папка для загружаемых фото)



 npm run dev
 npm run init-db  # Создать БД с тестовыми данными
  npm run create-admin админ


 **Геолокация**


Геолокация добавляется **отдельно и обычно автоматически или через фронт**, есть специальный роут:

```ts
POST /api/notifications/update-location
```

Он как раз отвечает за **обновление координат пользователя**.

---

### Как это работает

1. **Фронт получает координаты пользователя** через браузер или мобильное устройство:

```ts
navigator.geolocation.getCurrentPosition((position) => {
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;
  // отправить на сервер
});
```

2. **Отправляет на бэк**:

```json
POST /api/notifications/update-location
{
  "lat": 56.8389,
  "lon": 60.6057
}
```

3. **Бэк обновляет User**:

```ts
user.lastLat = latNum;
user.lastLon = lonNum;
user.lastLocationUpdate = formatDate();
await user.save();
```

4. После этого **геолокация хранится в БД** и используется для:

* уведомлений
* фильтрации


