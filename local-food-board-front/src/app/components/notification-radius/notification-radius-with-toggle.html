<div class="notification-radius">
  <div class="header-with-toggle">
    <h4>–†–∞–¥–∏—É—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h4>
    <label class="toggle-switch">
      <input 
        type="checkbox" 
        [(ngModel)]="notificationsEnabled"
        (change)="onNotificationsToggle()"
      />
      <span class="toggle-slider"></span>
      <span class="toggle-label">
        {{ notificationsEnabled ? '–í–∫–ª—é—á–µ–Ω–æ' : '–û—Ç–∫–ª—é—á–µ–Ω–æ' }}
      </span>
    </label>
  </div>

  @if (notificationsEnabled) {
    <p class="description">
      –í—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö –≤ —Ä–∞–¥–∏—É—Å–µ {{ radiusKm }} –æ—Ç –≤–∞—Å
    </p>

    <div class="slider-container">
      <input
        type="range"
        min="500"
        max="50000"
        step="500"
        [(ngModel)]="radius"
        (change)="onRadiusChange()"
        class="radius-slider"
      />
      <div class="slider-labels">
        <span>500–º</span>
        <span>{{ radiusKm }}</span>
        <span>50–∫–º</span>
      </div>
    </div>

    <div class="radius-presets">
      <button (click)="setRadius(500)" [class.active]="radius === 500">
        500–º
      </button>
      <button (click)="setRadius(1000)" [class.active]="radius === 1000">
        1–∫–º
      </button>
      <button (click)="setRadius(5000)" [class.active]="radius === 5000">
        5–∫–º
      </button>
      <button (click)="setRadius(10000)" [class.active]="radius === 10000">
        10–∫–º
      </button>
      <button (click)="setRadius(25000)" [class.active]="radius === 25000">
        25–∫–º
      </button>
    </div>
  } @else {
    <p class="description disabled">
      –í—ã –Ω–µ –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö
    </p>
  }

  @if (saving) {
    <div class="save-message saving">üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</div>
  } @else if (saved) {
    <div class="save-message success">
      ‚úì {{ notificationsEnabled ? '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã' : '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã' }}
    </div>
  } @else if (error) {
    <div class="save-message error">{{ error }}</div>
  }
</div>